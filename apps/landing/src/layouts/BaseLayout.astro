---
import SEO from '../components/SEO.astro';
import '../styles/global.css';

interface Props {
  title: string;
  description: string;
  canonical?: string;
  noindex?: boolean;
  type?: 'website' | 'article';
  publishedTime?: string;
  modifiedTime?: string;
}

const { title, description, canonical, noindex, type = 'website', publishedTime, modifiedTime } = Astro.props;
const pathname = Astro.url.pathname;
const isHome = pathname === '/';
const isStudio = pathname === '/studio';
---

<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title === 'VideoGenApp' ? title : `${title} | VideoGenApp`}</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link href="https://cdn.jsdelivr.net/npm/geist@1.3.0/dist/fonts/geist-sans/style.css" rel="stylesheet" />
    <SEO
      title={title}
      description={description}
      canonical={canonical}
      noindex={noindex}
      type={type}
      publishedTime={publishedTime}
      modifiedTime={modifiedTime}
    />
    <style is:global>
      :root { 
        font-family: 'Geist', system-ui, sans-serif; 
      }
      .dot-grid {
        background-image: radial-gradient(#27272a 1px, transparent 1px);
        background-size: 24px 24px;
      }
      /* Custom scrollbar */
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(39, 39, 42, 0.3);
        border-radius: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(161, 161, 170, 0.5);
        border-radius: 4px;
        transition: background 0.2s;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(161, 161, 170, 0.8);
      }
      .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: rgba(161, 161, 170, 0.5) rgba(39, 39, 42, 0.3);
      }
      .skip-link {
        position: absolute;
        top: -100px;
        left: 0.5rem;
        z-index: 100;
        padding: 0.5rem 1rem;
        background: #00f5ff;
        color: #0a0a0a;
        font-weight: 600;
        border-radius: 0.375rem;
        transition: top 0.2s;
      }
      .skip-link:focus {
        top: 0.5rem;
        outline: 2px solid #00f5ff;
        outline-offset: 2px;
      }
    </style>
  </head>
  <body class="bg-background-dark font-display text-white antialiased selection:bg-white selection:text-black">
    <div class="flex flex-col min-h-screen relative">
      <div class="fixed inset-0 dot-grid opacity-30 pointer-events-none z-0"></div>
      <a href="#main-content" class="skip-link">Skip to main content</a>
      <header class="sticky top-0 z-50 flex items-center justify-between border-b border-solid border-border-stealth px-6 md:px-12 py-4 bg-background-dark/80 backdrop-blur-md">
        <div class="flex items-center gap-3 text-white">
          <div class="size-7">
            <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
              <path clip-rule="evenodd" d="M24 18.4228L42 11.475V34.3663C42 34.7796 41.7457 35.1504 41.3601 35.2992L24 42V18.4228Z" fill="currentColor" fill-rule="evenodd"></path>
              <path clip-rule="evenodd" d="M24 8.18819L33.4123 11.574L24 15.2071L14.5877 11.574L24 8.18819ZM9 15.8487L21 20.4805V37.6263L9 32.9945V15.8487ZM27 37.6263V20.4805L39 15.8487V32.9945L27 37.6263ZM25.354 2.29885C24.4788 1.98402 23.5212 1.98402 22.646 2.29885L4.98454 8.65208C3.7939 9.08038 3 10.2097 3 11.475V34.3663C3 36.0196 4.01719 37.5026 5.55962 38.098L22.9197 44.7987C23.6149 45.0671 24.3851 45.0671 25.0803 44.7987L42.4404 38.098C43.9828 37.5026 45 36.0196 45 34.3663V11.475C45 10.2097 44.2061 9.08038 43.0155 8.65208L25.354 2.29885Z" fill="currentColor" fill-rule="evenodd"></path>
            </svg>
          </div>
          <h2 class="text-white text-xl font-bold tracking-tight">VideoGenApp</h2>
        </div>
        <div class="flex items-center gap-6">
          <nav class="hidden md:flex items-center gap-8">
            <a href="/" class={`text-sm font-medium transition-colors ${isHome ? 'text-white' : 'text-text-secondary hover:text-white'}`} aria-current={isHome ? 'page' : undefined}>Home</a>
            <a href="/studio" class={`text-sm font-medium transition-colors ${isStudio ? 'text-white' : 'text-text-secondary hover:text-white'}`} aria-current={isStudio ? 'page' : undefined}>Studio</a>
          </nav>
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-8 ring-1 ring-border-stealth" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuA5QsN6WJN-Vr2Jns1P2wqG8PTG5iwBvg-2VMyUQl52xPdppvA9-QAGNleAgZL7ubXSXrDsXHeyl4FSDJ47sp6aEA-PaYXt4lqwlRzTDVI0TW8FbGeFuEi0qoNJDRRajntBun9NPWi0vfN2ZMdNaRncdi1aWKycIhUHwT7H4Tt-IJzK4oJZNBkmfB10nCieURFgIZ9VskMGQS7gOds9AmijJAnB20HMZQOmyz8d_OliAldVg5UXZ0bV2N6Bx-xhhQ2mLriIR-P-Jwc");'></div>
        </div>
      </header>
      <main id="main-content" tabindex="-1" class="flex flex-col flex-1">
        <slot />
      </main>
      <footer class="border-t border-border-stealth px-6 md:px-12 py-12 bg-background-dark relative z-10">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8">
          <div class="flex items-center gap-3 text-white/40">
            <div class="size-5">
              <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <path clip-rule="evenodd" d="M24 18.4228L42 11.475V34.3663C42 34.7796 41.7457 35.1504 41.3601 35.2992L24 42V18.4228Z" fill="currentColor" fill-rule="evenodd"></path>
                <path clip-rule="evenodd" d="M24 8.18819L33.4123 11.574L24 15.2071L14.5877 11.574L24 8.18819ZM9 15.8487L21 20.4805V37.6263L9 32.9945V15.8487ZM27 37.6263V20.4805L39 15.8487V32.9945L27 37.6263ZM25.354 2.29885C24.4788 1.98402 23.5212 1.98402 22.646 2.29885L4.98454 8.65208C3.7939 9.08038 3 10.2097 3 11.475V34.3663C3 36.0196 4.01719 37.5026 5.55962 38.098L22.9197 44.7987C23.6149 45.0671 24.3851 45.0671 25.0803 44.7987L42.4404 38.098C43.9828 37.5026 45 36.0196 45 34.3663V11.475C45 10.2097 44.2061 9.08038 43.0155 8.65208L25.354 2.29885Z" fill="currentColor" fill-rule="evenodd"></path>
              </svg>
            </div>
            <span class="text-sm font-semibold tracking-tight uppercase">VideoGenApp</span>
          </div>
          <p class="text-text-secondary text-xs">Â© 2026 VideoGenApp. Built with Bun, Elysia, Tailwind & Astro.</p>
          <div class="flex items-center gap-8">
            <a class="text-xs text-text-secondary hover:text-white transition-colors" href="#">Privacy Policy</a>
            <a class="text-xs text-text-secondary hover:text-white transition-colors" href="#">Terms of Service</a>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>
